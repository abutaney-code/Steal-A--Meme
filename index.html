<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Steal the Memes: Tycoon</title>
    <style>
      :root {
        --bg-color: #1a1a1a;
        --text-color: #ffffff;
        --accent-color: #ff0055;
        --money-color: #00ff88;
        --shield-color: #00ccff;
        --upgrade-color: #ffcc00; 
        --glitch-color: #ff0000;
      }

      body {
        font-family: "Courier New", Courier, monospace;
        background-color: var(--bg-color);
        color: var(--text-color);
        margin: 0; padding: 20px;
        display: flex; flex-direction: column; align-items: center;
        transition: background 0.1s; overflow-x: hidden;
      }

      @keyframes glitch-bg {
        0% { background-color: #ff0000; }
        25% { background-color: #00ff00; }
        50% { background-color: #0000ff; }
        75% { background-color: #ffff00; }
        100% { background-color: #ff00ff; }
      }

      .glitch-active-body { animation: glitch-bg 0.15s infinite !important; }

      @keyframes jitter {
        0% { transform: translate(0,0) scale(1) rotate(0deg); }
        25% { transform: translate(12px, -12px) scale(1.4) rotate(8deg); }
        50% { transform: translate(-12px, 12px) scale(0.6) rotate(-8deg); }
        75% { transform: translate(8px, 8px) scale(1.2) rotate(4deg); }
        100% { transform: translate(0,0) scale(1) rotate(0deg); }
      }

      .jitter-text { animation: jitter 0.04s infinite; display: inline-block; }

      #hud {
        display: flex; justify-content: space-between;
        width: 100%; max-width: 600px;
        background: #333; padding: 15px; border-radius: 10px;
        border: 2px solid var(--text-color); margin-bottom: 20px;
        font-size: 1.2rem; font-weight: bold;
      }

      .money-text { color: var(--money-color); }

      #game-board {
        display: grid; grid-template-columns: 1fr 1fr; gap: 20px;
        width: 100%; max-width: 800px;
      }

      .zone { background: #2a2a2a; border: 2px solid #555; border-radius: 10px; padding: 15px; min-height: 350px; }
      .unit-list { display: flex; flex-wrap: wrap; gap: 5px; max-height: 250px; overflow-y: auto; padding: 5px; }

      .unit { background: #444; padding: 5px 10px; border-radius: 5px; font-size: 0.8rem; position: relative; }

      /* Sell Mode Visuals */
      .sell-cursor .unit:not(.unit-permanent) { cursor: pointer; border: 1px dashed red; }
      .sell-cursor .unit:not(.unit-permanent):hover { background: #600; }
      .sell-cursor .unit:not(.unit-permanent):hover::after { content: " üí∞SELL"; color: #00ff88; font-weight: bold; }

      .unit-permanent { border: 1px solid var(--upgrade-color); background: #3d3411; box-shadow: 0 0 8px var(--upgrade-color); }
      .unit-elite { border: 2px solid #ffffff; background: #000; box-shadow: 0 0 12px #fff; font-weight: bold; }

      .actions { margin-top: 15px; display: flex; flex-direction: column; gap: 8px; }

      button { padding: 8px; cursor: pointer; font-weight: bold; border: none; border-radius: 5px; }
      .btn-buy { background-color: var(--money-color); color: #000; }
      .btn-upgrade { background-color: var(--upgrade-color); color: #000; }
      .btn-steal { background-color: var(--accent-color); color: white; }
      .btn-shield { background-color: var(--shield-color); width: 100%; padding: 15px; margin-bottom: 20px; }
      .btn-glitch { background-color: var(--glitch-color); color: white; border: 2px dashed white; }
      .btn-sell-mode { background-color: #444; color: white; border: 2px solid #777; margin-bottom: 5px; }
      .sell-mode-active { background-color: #ff0000 !important; border: 2px solid white !important; }

      #glitch-overlay {
        display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.92); z-index: 1000; flex-direction: column;
        justify-content: center; align-items: center;
      }
      .glitch-text { color: white; font-weight: bold; font-size: 2.2rem; text-shadow: 4px 4px #ff0000; margin-bottom: 20px; text-align: center; }
      #countdown { font-size: 10rem; color: white; font-family: Impact, sans-serif; }
      
      #log { width: 100%; max-width: 800px; height: 100px; background: #000; border: 1px solid #555; margin-top: 20px; padding: 10px; overflow-y: scroll; font-size: 0.85rem; color: #ccc; }
    </style>
  </head>
  <body id="main-body">

    <div id="glitch-overlay">
      <div class="glitch-text">Hahaha you want to much money but bad boy</div>
      <div id="countdown" class="jitter-text">200</div>
    </div>

    <h1>STEAL A MEME: TYCOON</h1>

    <div id="hud">
      <div>Cash: <span id="money" class="money-text">$0</span></div>
      <div>Income: <span id="income" class="money-text">$0</span>/sec</div>
    </div>

    <button id="shieldBtn" class="btn-shield" onclick="toggleShield()">ACTIVATE SHIELD (Ready)</button>

    <div id="game-board">
      <div id="player-zone" class="zone">
        <h2>YOUR BASE</h2>
        <div id="my-units" class="unit-list"></div>
        <div class="actions">
          <button id="sellModeBtn" class="btn-sell-mode" onclick="toggleSellMode()">SELL MODE: OFF</button>
          
          <h3>MARKETPLACE</h3>
          <button class="btn-buy" onclick="buyUnit('Noob Cube')">Noob Cube ($50)</button>
          <button class="btn-buy" onclick="buyUnit('Vibe Cat')">Vibe Cat ($200)</button>
          <button class="btn-buy" onclick="buyUnit('Golden Doge')">Golden Doge ($1k)</button>
          <button class="btn-buy" style="border: 1px solid white;" onclick="buyUnit('Gigachad')">Gigachad ($10k | +$1k/s) ‚òÖ</button>
          
          <h3>BASE UPGRADES</h3>
          <button id="diamondStatueBtn" class="btn-upgrade" onclick="buyUnit('Diamond Statue')">Diamond Statue ($5k) [0/15]</button>
          <button id="serverRoomBtn" class="btn-upgrade" onclick="buyUnit('Server Room')">Server Room ($100k) [0/5]</button>
          
          <h3>‚ö†Ô∏è SECRET ‚ö†Ô∏è</h3>
          <button class="btn-glitch" onclick="triggerGlitch()">GLITCHED COIN ($1)</button>
        </div>
      </div>
      <div class="zone">
        <h2>NEIGHBOR'S BASE</h2>
        <div id="enemy-units" class="unit-list"></div>
        <div class="actions">
          <button class="btn-steal" onclick="attemptSteal()">üèÉ STEAL UNIT</button>
        </div>
      </div>
    </div>

    <div id="log">The neighbor can't spawn Gigachads anymore. Only YOU can own them!</div>

    <script>
      let money = 100;
      let myUnits = [];
      let enemyUnits = [];
      let gameActive = true;
      let shieldActive = false;
      let shieldReady = true;
      let sellMode = false;

      const unitTypes = {
        "Noob Cube": { cost: 50, mps: 2, icon: "üßä", permanent: false },
        "Vibe Cat": { cost: 200, mps: 10, icon: "üê±", permanent: false },
        "Golden Doge": { cost: 1000, mps: 60, icon: "üêï", permanent: false },
        "Gigachad": { cost: 10000, mps: 1000, icon: "üóø", permanent: false, isElite: true },
        "Diamond Statue": { cost: 5000, mps: 300, icon: "üíé", permanent: true, limit: 15 },
        "Server Room": { cost: 100000, mps: 5000, icon: "üñ•Ô∏è", permanent: true, limit: 5 }
      };

      // Income Loop
      setInterval(() => {
        if (!gameActive) return;
        money += myUnits.reduce((acc, u) => acc + u.mps, 0);
        updateUI();
      }, 1000);

      // Spawner Loop (NO GIGACHADS FOR NEIGHBOR)
      setInterval(() => {
        if (!gameActive) return;
        
        // Neighbor steals YOUR stuff
        const targets = myUnits.filter(u => !u.permanent);
        if (targets.length > 0 && !shieldActive && Math.random() < 0.3) {
           const victim = targets[Math.floor(Math.random() * targets.length)];
           myUnits.splice(myUnits.indexOf(victim), 1);
           enemyUnits.push(victim);
           log(`The neighbor stole your ${victim.name}!`, "log-bad");
        }
        
        // Spawn neighbor units (EXCLUDES GIGACHAD)
        const commonKeys = ["Noob Cube", "Vibe Cat", "Golden Doge"];
        const name = commonKeys[Math.floor(Math.random() * commonKeys.length)];
        enemyUnits.push({ ...unitTypes[name], name });
        updateUI();
      }, 5000);

      function toggleSellMode() {
        if (!gameActive) return;
        sellMode = !sellMode;
        const btn = document.getElementById("sellModeBtn");
        const list = document.getElementById("my-units");
        if (sellMode) {
          btn.innerText = "SELL MODE: ON";
          btn.classList.add("sell-mode-active");
          list.classList.add("sell-cursor");
        } else {
          btn.innerText = "SELL MODE: OFF";
          btn.classList.remove("sell-mode-active");
          list.classList.remove("sell-cursor");
        }
      }

      function sellItem(index) {
        if (!gameActive || !sellMode) return;
        const item = myUnits[index];
        if (item.permanent) return; // Prevent selling statues
        
        const refund = Math.floor(item.cost * 0.5);
        money += refund;
        log(`Sold ${item.name} for $${refund}`, "money-text");
        myUnits.splice(index, 1);
        updateUI();
      }

      function buyUnit(name) {
        if (!gameActive || sellMode) return;
        const u = unitTypes[name];
        if (u.limit && myUnits.filter(x => x.name === name).length >= u.limit) return;
        if (money >= u.cost) {
          money -= u.cost;
          myUnits.push({ ...u, name });
          updateUI();
        }
      }

      function attemptSteal() {
        if (!gameActive || enemyUnits.length === 0 || sellMode) return;
        if (Math.random() > 0.5) {
            myUnits.push(enemyUnits.pop());
            log("Stole a meme from the neighbor!", "money-text");
        } else if (money >= 25) {
            money -= 25;
            log("Caught! Paid $25 fine.", "log-bad");
        }
        updateUI();
      }

      function triggerGlitch() {
        if (!gameActive || money < 1) return;
        money -= 1;
        gameActive = false;
        if (sellMode) toggleSellMode(); // Force off
        document.getElementById("main-body").classList.add("glitch-active-body");
        document.getElementById("glitch-overlay").style.display = "flex";
        
        let timeLeft = 200;
        const timer = setInterval(() => {
          timeLeft--;
          document.getElementById("countdown").innerText = timeLeft;
          if (timeLeft <= 0) {
            clearInterval(timer);
            gameActive = true;
            document.getElementById("main-body").classList.remove("glitch-active-body");
            document.getElementById("glitch-overlay").style.display = "none";
            updateUI();
          }
        }, 1000);
      }

      function toggleShield() {
        if (!gameActive || !shieldReady || sellMode) return;
        shieldActive = true; shieldReady = false;
        setTimeout(() => { 
          shieldActive = false; 
          setTimeout(() => { shieldReady = true; updateUI(); }, 12000);
          updateUI();
        }, 8000);
        updateUI();
      }

      function updateUI() {
        document.getElementById("money").innerText = `$${money.toLocaleString()}`;
        document.getElementById("income").innerText = gameActive ? `$${myUnits.reduce((acc, u) => acc + u.mps, 0).toLocaleString()}` : "$0";
        
        const container = document.getElementById("my-units");
        container.innerHTML = "";
        myUnits.forEach((u, index) => {
          let d = document.createElement("div");
          d.className = `unit ${u.permanent ? 'unit-permanent' : ''} ${u.isElite ? 'unit-elite' : ''}`;
          d.innerText = `${u.icon} ${u.name}`;
          d.onclick = () => sellItem(index);
          container.appendChild(d);
        });

        const enemyContainer = document.getElementById("enemy-units");
        enemyContainer.innerHTML = "";
        enemyUnits.forEach(u => {
          let d = document.createElement("div");
          d.className = `unit ${u.isElite ? 'unit-elite' : ''}`;
          d.innerText = `${u.icon} ${u.name}`;
          enemyContainer.appendChild(d);
        });
      }

      function log(msg, type) {
        const p = document.createElement("div");
        p.innerText = `> ${msg}`;
        p.className = type;
        document.getElementById("log").prepend(p);
      }
      updateUI();
    </script>
  </body>
</html>
